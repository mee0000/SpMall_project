<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.spmall.mapper.ProductUserMapper">
    <insert id="insertProductUser" parameterType="com.example.spmall.pojo.ProductUser">
        insert into product_user
        (user_name, password,create_date,phone_number
            <if test="lastName != '' || lastName !=null">
                ,last_name
            </if>
            <if test="firstName != '' || firstName !=null">
                ,first_name
            </if>
            <if test="address != '' || address !=null">
                ,address
            </if>
            <if test="zipCode != '' || zipCode !=null">
                ,zip_code
            </if>
        )values (
        #{userName}, SHA2(#{password}, 256), #{createDate}, #{phoneNumber}
            <if test="lastName != '' || lastName !=null">
                ,#{lastName}
            </if>
            <if test="firstName != '' || firstName !=null">
                ,#{firstName}
            </if>
            <if test="address != '' || address !=null">
                ,#{address}
            </if>
            <if test="zipCode != '' || zipCode !=null">
                ,#{zipCode}
            </if>
        )

    </insert>

    <update id="updateProductUser" parameterType="map">
        update product_user set
        <if test="phoneNumber != '' || phoneNumber!=null">
            phone_number = #{phoneNumber}
        </if>
        <if test="lastName != '' || lastName !=null">
            ,last_name = #{lastName}
        </if>
        <if test="firstName != '' || firstName !=null">
            ,first_name = #{firstName}
        </if>
        <if test="address != '' || address !=null">
            ,address = #{address}
        </if>
        <if test="zipCode != '' || zipCode !=null">
            ,zip_code= #{zipCode}
        </if>
        where id = #{id}
    </update>


</mapper>

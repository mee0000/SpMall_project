import{d as L,r as N,u as $,s as U,b as m,n as B,e as g,o as r,K as D,h as E,k as M,f as t,y as k,U as T,j as y,c as u,i as v,l as j,t as i,F as I,A as z,D as F,g as C,p as O,q as Q,_ as K}from"./index-HA-C2-6D.js";import{_ as R}from"./CartSummary.vue_vue_type_script_setup_true_lang-C8vWlLFP.js";import{u as G,a as H}from"./cart-4v3HBVN5.js";const d=c=>(O("data-v-da1d35a6"),c=c(),Q(),c),J={class:"col-12 col-lg-8"},P=d(()=>t("div",{class:"cart-title mt-50"},[t("h2",null,"Shopping Cart")],-1)),W={class:"table table-bordered"},X={scope:"col"},Y=d(()=>t("th",{scope:"col"},"상품이미지",-1)),Z=d(()=>t("th",{scope:"col"},"상품/옵션정보",-1)),ee=d(()=>t("th",{scope:"col"},"상품금액",-1)),te=d(()=>t("th",{scope:"col"},"수량",-1)),oe={scope:"row"},se=["checked","onChange"],ne=["src"],ae={style:{"margin-right":"2px","font-size":"12px"}},le={key:1},re=d(()=>t("td",{colspan:"5",style:{"text-align":"center",color:"#dedede"}},"장바구니가 비었습니다",-1)),de=[re],ue=L({__name:"index",setup(c){let a=N([]),p=$(),_=G(),x=M();U(()=>{S()});const b=o=>{o.done=!o.done,console.log(o.done,"-----cart")},f=m({get(){return a.value.every(o=>o.done==!0)},set(o){a.value.forEach(s=>{s.done=o})}}),q=m(()=>{const o=a.value.reduce((n,e)=>(e.done&&(n+=e.skuInfo.price*e.qty),n),0),s=a.value.reduce((n,e)=>(e.done&&(n+=e.qty),n),0),h=a.value.reduce((n,e)=>(e.done&&(n+=e.skuInfo.goods_price_min*e.qty),n),0);return{price:o,num:s,priceMin:h}}),S=async()=>{if(p.userInfo.id){let o=p.userInfo.id;try{await _.getCartList(o),B(()=>{_.cartList.forEach(s=>{s.done=!0,a.value.push(s)})})}catch(s){console.log(s)}}},V=async o=>{console.log("cart",o),(await H(o)).code==200&&await _.getCartTotal(p.userInfo.id)},w=m(()=>a.value.reduce((o,s)=>(s.done&&o.push(s),o),[])),A=()=>{const o=w.value.map(s=>s.id);x.push({name:"payment",query:{mode:"cart",cartIds:o.join(",")}})};return(o,s)=>{const h=g("el-input-number"),n=g("base-container");return r(),D(n,null,{default:E(()=>[t("div",J,[P,t("div",null,[t("table",W,[t("tr",null,[t("th",X,[k(t("input",{type:"checkbox",onChange:s[0]||(s[0]=(...e)=>o.changeAllChecked&&o.changeAllChecked(...e)),"onUpdate:modelValue":s[1]||(s[1]=e=>f.value=e)},null,544),[[T,f.value]])]),Y,Z,ee,te]),y(a).length>0?(r(!0),u(I,{key:0},v(y(a),(e,ce)=>(r(),u("tr",{key:e.id},[t("th",oe,[t("input",{type:"checkbox",checked:e.done,onChange:l=>b(e)},null,40,se)]),t("td",null,[t("img",{src:e.skuInfo.skuDefaultImg,style:{width:"50px"}},null,8,ne)]),t("td",null,[j(i(e.skuInfo.spuName)+" ",1),t("p",null,[(r(!0),u(I,null,v(e.skuInfo.skuSaleAttrValueList,l=>(r(),u("span",ae,i(`${l.saleAttrName}:${l.saleAttrValueName}`),1))),256))])]),t("td",null,[k(t("span",{class:"goods_price_min"},i(e.skuInfo.goods_price_min*e.qty),513),[[z,e.skuInfo.discount>0]]),t("span",{class:F({"price-old__amount":e.skuInfo.goods_price_min!=0})},i(e.skuInfo.price*e.qty),3)]),t("td",null,[C(h,{modelValue:e.qty,"onUpdate:modelValue":l=>e.qty=l,min:1,max:e.skuInfo.quantity,onChange:l=>V(e)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])])]))),128)):(r(),u("tr",le,de))])])]),C(R,{total:q.value,onAddOrder:A,title:"주문하기",mode:"cart"},null,8,["total"])]),_:1})}}}),he=K(ue,[["__scopeId","data-v-da1d35a6"]]);export{he as default};

import{d as U,e as o,o as v,f as P,g as e,w as t,p as Y,k as Z,m as V,_ as G,r as y,v as $,j as f,t as b,F as z,q as B,S as H,y as W,Y as X,V as ee,h as g,A as L,B as A,J as F,Z as te,$ as ae,L as q}from"./index-7801d67b.js";const le=a=>(Y("data-v-a925df92"),a=a(),Z(),a),ne={class:"container"},oe=le(()=>V("span",{class:"text-gray-500"},"-",-1)),se=U({__name:"index",props:["searchParams"],emits:["update:searchParams"],setup(a,{emit:w}){let h=w,i=a;const m=()=>{h("update:searchParams",i.searchParams)};return(C,p)=>{const l=o("el-input"),u=o("el-col"),c=o("el-form-item"),S=o("el-button"),s=o("el-form");return v(),P("div",ne,[e(s,{inline:!0,model:a.searchParams,class:"demo-form-inline","label-width":"80px"},{default:t(()=>[e(c,{label:"price by"},{default:t(()=>[e(u,{span:11},{default:t(()=>[e(l,{modelValue:a.searchParams.min,"onUpdate:modelValue":p[0]||(p[0]=k=>a.searchParams.min=k),type:"number",placeholder:"0",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(u,{span:2,class:"text-center"},{default:t(()=>[oe]),_:1}),e(u,{span:11},{default:t(()=>[e(l,{modelValue:a.searchParams.max,"onUpdate:modelValue":p[1]||(p[1]=k=>a.searchParams.max=k),type:"number",placeholder:"100",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(c,null,{default:t(()=>[e(l,{modelValue:a.searchParams.keyword,"onUpdate:modelValue":p[2]||(p[2]=k=>a.searchParams.keyword=k),placeholder:"Please input"},{append:t(()=>[e(S,{icon:"Search",onClick:m})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])}}});const re=G(se,[["__scopeId","data-v-a925df92"]]),ue=V("h4",null,"상품 SKU 상세페이지",-1),ce=U({__name:"Drawer",props:["drawer"],emits:["update"],setup(a,{emit:w}){const h=y("rtl");let i=w;const m=()=>{i("update")};return(C,p)=>{const l=o("el-col"),u=o("el-row"),c=o("el-tag"),S=o("el-drawer");return v(),$(S,{"model-value":a.drawer.isShow,direction:h.value,"before-close":m},{header:t(()=>[ue]),default:t(()=>[e(u,null,{default:t(()=>[e(l,{span:6},{default:t(()=>[f("skuName")]),_:1}),e(l,{span:18},{default:t(()=>[f(b(a.drawer.skuName),1)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(l,{span:6},{default:t(()=>[f("설명")]),_:1}),e(l,{span:18},{default:t(()=>[f(b(a.drawer.decoration),1)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(l,{span:6},{default:t(()=>[f("가격")]),_:1}),e(l,{span:18},{default:t(()=>[f(b(a.drawer.price),1)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(l,{span:6},{default:t(()=>[f("상품속성")]),_:1}),e(l,{span:18},{default:t(()=>[(v(!0),P(z,null,B(a.drawer.skuAttrValueList,s=>(v(),$(c,{key:s},{default:t(()=>[f(b(s.valueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(l,{span:6},{default:t(()=>[f("세일 속성")]),_:1}),e(l,{span:18},{default:t(()=>[(v(!0),P(z,null,B(a.drawer.skuSaleAttrValueList,s=>(v(),$(c,{key:s.id,style:{"margin-right":"5px"}},{default:t(()=>[f(b(s.saleAttrValueName),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["model-value","direction"])}}}),de=["src"],me=U({__name:"index",setup(a){let w=y([]),h=y(0),i=y(1),m=y(10),C=y(3),p=y(),l=H(),u=y({id:"",spuId:"",price:"",quantity:"",skuName:"",category2Id:"",skuDefaultImg:"",discount:"",decoration:"",skuAttrValueList:[],skuSaleAttrValueList:[]}),c=y({keyword:"",min:"",max:"",category2Id:""});W(()=>l.category2Id,()=>{if(l.category2Id==""){w.value=[];return}c.value={keyword:"",min:"",max:"",category2Id:""},s()});const S=n=>{console.log("changeScene"),h.value=n.flag,n.params=="update"||n.params=="cancel"?s(i.value):s()},s=async()=>{c.value.category2Id=l.category2Id;const n=await X(i.value,m.value,c.value);n.code==200&&(w.value=n.data.rows,C.value=n.data.total)},k=n=>{h.value=2;const{category1Id:d,category2Id:x}=l;p.value.initSku(d,x,n,"editSku")},E=n=>{Object.assign(c.value,n),console.log(c.value,"---------"),s()},K=n=>{u.value={...n,isShow:!0}},T=async n=>{const d=n.status==1?2:1,x={...n,status:d};(await te(x)).code==200&&s()},O=async n=>{(await ae(n.id)).code==200?(q({type:"success",message:"SKU 삭제 완료"}),s()):q({type:"error",message:"SKU 삭제 실패"})},R=()=>{u.value.isShow=!1};return ee(()=>{l.$reset()}),(n,d)=>{const x=o("Category"),_=o("el-table-column"),I=o("el-button"),j=o("el-popconfirm"),J=o("el-table"),M=o("el-pagination"),D=o("el-card"),Q=o("SkuForm");return v(),P(z,null,[e(x,{scene:g(h)},null,8,["scene"]),L(e(D,{style:{"margin-top":"10px"}},{default:t(()=>[e(re,{searchParams:g(c),"onUpdate:searchParams":E},null,8,["searchParams"]),e(J,{data:g(w),style:{width:"100%"},border:""},{default:t(()=>[e(_,{label:"No",type:"index",align:"center",width:"80px"}),e(_,{label:"img",width:"120"},{default:t(({row:r})=>[V("img",{src:r.skuDefaultImg,style:{width:"100px",height:"100px"}},null,8,de)]),_:1}),e(_,{prop:"createTime",label:"등록일",width:"120",type:"date"}),e(_,{prop:"skuName",label:"Name",width:"120"}),e(_,{prop:"price",label:"Pirce",width:"120"}),e(_,{prop:"discount",label:"Discount",width:"120"}),e(_,{prop:"decoration",label:"Decoration","show-overflow-tooltip":"",width:"120px"}),e(_,{prop:"quantity",label:"Qty",width:"120"}),e(_,{fixed:"right",label:"Operations",width:"250"},{default:t(({row:r})=>[e(I,{type:r.status==1?"primary":"info",size:"small",icon:r.status==1?"Top":"Bottom",onClick:N=>T(r)},null,8,["type","icon","onClick"]),e(I,{type:"warning",size:"small",icon:"InfoFilled",onClick:N=>K(r)},null,8,["onClick"]),e(I,{type:"success",size:"small",icon:"Edit",onClick:N=>k(r)},null,8,["onClick"]),e(j,{title:`${r.skuName}을/를 삭제하겠습니까?`,onConfirm:N=>O(r)},{reference:t(()=>[e(I,{type:"danger",plain:"",size:"small",icon:"Delete"})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(M,{"current-page":g(i),"onUpdate:currentPage":d[0]||(d[0]=r=>F(i)?i.value=r:i=r),"page-size":g(m),"onUpdate:pageSize":d[1]||(d[1]=r=>F(m)?m.value=r:m=r),layout:" prev, pager, next,jumper,->,sizes, total",total:g(C),"page-sizes":[3,5,7,10],onSizeChange:d[2]||(d[2]=r=>s(g(m))),onCurrentChange:s},null,8,["current-page","page-size","total"])]),_:1},512),[[A,g(h)==0]]),L(V("div",null,[e(D,{style:{"margin-top":"20px"}},{default:t(()=>[e(Q,{onChangeScene:S,ref_key:"skuForm",ref:p},null,512)]),_:1})],512),[[A,g(h)==2]]),e(ce,{drawer:g(u),onUpdate:R},null,8,["drawer"])],64)}}});export{me as default};

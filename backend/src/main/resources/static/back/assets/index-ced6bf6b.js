import{b as L,c as $,d as q}from"./index-f3eb8b46.js";import{d as z,r as v,a as B,D as N,e as i,o as U,f as w,g as e,w as t,j as r,h as d,m as E,J as y,F,L as M}from"./index-06005ebc.js";const R={class:"dialog-footer"},J=z({__name:"index",setup(j){let a=v(!1),u=v([]),s=B({id:"",pid:"",name:"",code:"",toCode:"",type:"",status:"",level:"",select:"",path:"",checked:!1,createTime:"",updateTime:"",children:[]});N(()=>{p()});const p=async()=>{const o=await L();u.value=o.data},C=o=>{a.value=!0,s.pid=o.id,s.level=o.level+1},V=o=>{a.value=!0,s=o},k=async o=>{(await $(o)).code==200&&M({type:"success",message:"삭제 성공"})},g=async()=>{(await q(s)).code==200&&(a.value=!1,s={id:"",pid:"",name:"",code:"",toCode:"",type:"",status:"",level:"",select:"",path:"",checked:!1,createTime:"",updateTime:"",children:[]},p())};return(o,n)=>{const c=i("el-table-column"),m=i("el-button"),h=i("el-popconfirm"),T=i("el-table"),f=i("el-input"),_=i("el-form-item"),x=i("el-form"),P=i("el-dialog");return U(),w(F,null,[e(T,{data:d(u),style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:""},{default:t(()=>[e(c,{label:"name",prop:"name"}),e(c,{label:"권한",prop:"code"}),e(c,{label:"수정시간",prop:"updateTime"}),e(c,{label:"기타"},{default:t(({row:l})=>[e(m,{type:"primary",size:"small",disabled:l.level==4,onClick:b=>C(l)},{default:t(()=>[r("메뉴추가")]),_:2},1032,["disabled","onClick"]),e(m,{type:"primary",size:"small",disabled:l.level==1,onClick:b=>V(l)},{default:t(()=>[r("편집")]),_:2},1032,["disabled","onClick"]),e(h,{title:`${l.name}을/를 삭제하겠습니까?`,onConfirm:b=>k(l)},{reference:t(()=>[e(m,{type:"primary",size:"small",disabled:l.level==1},{default:t(()=>[r("삭제")]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(P,{modelValue:d(a),"onUpdate:modelValue":n[3]||(n[3]=l=>y(a)?a.value=l:a=l),title:"Tips",width:"30%"},{footer:t(()=>[E("span",R,[e(m,{onClick:n[2]||(n[2]=l=>y(a)?a.value=!1:a=!1)},{default:t(()=>[r("Cancel")]),_:1}),e(m,{onClick:g,type:"primary"},{default:t(()=>[r("Confirm")]),_:1})])]),default:t(()=>[e(x,{"label-width":"auto"},{default:t(()=>[e(_,{label:"name"},{default:t(()=>[e(f,{placeholder:"권한네임을 입력하세요",modelValue:d(s).name,"onUpdate:modelValue":n[0]||(n[0]=l=>d(s).name=l)},null,8,["modelValue"])]),_:1}),e(_,{label:"권한"},{default:t(()=>[e(f,{placeholder:"권한값을 입력하세요",modelValue:d(s).code,"onUpdate:modelValue":n[1]||(n[1]=l=>d(s).code=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{J as default};

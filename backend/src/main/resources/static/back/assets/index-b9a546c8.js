import{b as L,c as $,d as j}from"./index-cdb1d550.js";import{d as q,r as v,a as z,D as B,e as i,o as N,f as U,g as e,w as t,j as r,h as d,m as w,J as y,F as E,L as F}from"./index-7801d67b.js";const M={class:"dialog-footer"},D=q({__name:"index",setup(O){let o=v(!1),u=v([]),n=z({id:"",pid:"",name:"",code:"",toCode:"",type:"",status:"",level:"",select:"",path:"",checked:!1,createTime:"",updateTime:"",children:[]});B(()=>{p()});const p=async()=>{const s=await L();u.value=s.data},C=s=>{o.value=!0;const a={name:"",code:"",pid:s.id,level:s.level+1};Object.assign(n,a)},V=s=>{o.value=!0,Object.assign(n,s)},g=async s=>{(await $(s)).code==200&&F({type:"success",message:"삭제 성공"})},k=async()=>{(await j(n)).code==200&&(o.value=!1,n={id:"",pid:"",name:"",code:"",toCode:"",type:"",status:"",level:"",select:"",path:"",checked:!1,createTime:"",updateTime:"",children:[]},p())};return(s,a)=>{const c=i("el-table-column"),m=i("el-button"),h=i("el-popconfirm"),P=i("el-table"),f=i("el-input"),_=i("el-form-item"),T=i("el-form"),x=i("el-dialog");return N(),U(E,null,[e(P,{data:d(u),style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:""},{default:t(()=>[e(c,{label:"name",prop:"name"}),e(c,{label:"권한",prop:"code"}),e(c,{label:"수정시간",prop:"updateTime"}),e(c,{label:"기타"},{default:t(({row:l})=>[e(m,{type:"primary",size:"small",disabled:l.level==4,onClick:b=>C(l)},{default:t(()=>[r("메뉴추가")]),_:2},1032,["disabled","onClick"]),e(m,{type:"primary",size:"small",disabled:l.level==1,onClick:b=>V(l)},{default:t(()=>[r("편집")]),_:2},1032,["disabled","onClick"]),e(h,{title:`${l.name}을/를 삭제하겠습니까?`,onConfirm:b=>g(l)},{reference:t(()=>[e(m,{type:"primary",size:"small",disabled:l.level==1},{default:t(()=>[r("삭제")]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(x,{modelValue:d(o),"onUpdate:modelValue":a[3]||(a[3]=l=>y(o)?o.value=l:o=l),title:"Tips",width:"30%"},{footer:t(()=>[w("span",M,[e(m,{onClick:a[2]||(a[2]=l=>y(o)?o.value=!1:o=!1)},{default:t(()=>[r("Cancel")]),_:1}),e(m,{onClick:k,type:"primary"},{default:t(()=>[r("Confirm")]),_:1})])]),default:t(()=>[e(T,{"label-width":"auto"},{default:t(()=>[e(_,{label:"name"},{default:t(()=>[e(f,{placeholder:"권한네임을 입력하세요",modelValue:d(n).name,"onUpdate:modelValue":a[0]||(a[0]=l=>d(n).name=l)},null,8,["modelValue"])]),_:1}),e(_,{label:"권한"},{default:t(()=>[e(f,{placeholder:"권한값을 입력하세요",modelValue:d(n).code,"onUpdate:modelValue":a[1]||(a[1]=l=>d(n).code=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{D as default};

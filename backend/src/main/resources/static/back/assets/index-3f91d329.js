import{$ as k,d as J,r as _,a as C,D as G,e as r,o as y,f as N,g as l,w as n,j as b,h as s,m as V,J as v,v as K,z as h,L as w,_ as Q}from"./index-06005ebc.js";const W=(p,d)=>k.get(`http://sph-api.atguigu.cn/admin/product/baseTrademark/${p}/${d}`),X=p=>(console.log("saveTrademark",p),p.id?k.put("http://sph-api.atguigu.cn/admin/product/baseTrademark/update",{data:p}):k.post("http://sph-api.atguigu.cn/admin/product/baseTrademark/save",{data:p})),Y=["src"],Z=["src"],ee={class:"dialog-footer"},ae=J({__name:"index",setup(p){let d=_(1),c=_(3),x=_(0),U=C([]),u=_(!1),t=C({tmName:"",logoUrl:""}),m=_();const g=async(o=1)=>{d.value=o,console.log(d.value,"===========");let{data:e}=await W(d.value,c.value);e.code==200&&(U=e.records,x.value=e.total)},z={tmName:[{required:!0,validator:(o,e,i)=>{e.trim().length>=2?i():i(new Error("브랜드명 2글자 이상"))},trigger:"blur"}],logoUrl:[{required:!0,validator:(o,e,i)=>{e?i():i(new Error("이미지 업로드 부탁드립니다."))},trigger:"change"}]},$=()=>{u.value=!0,t.tmName="",t.logoUrl="",t.id=0,h(()=>{m.value.clearValidate()})},B=o=>{u.value=!0,m.value.clearValidate(),Object.assign(t,o),h(()=>{m.value.clearValidate()})},E=async()=>{await m.value.validate(),u.value=!1;let o=await X(t);console.log("저장하기",o),o.status==200?(w({type:"success",message:t.id?"수정완료":"브랜드 추가 완료"}),g(t.id?d.value:1)):w({type:"error",message:t.id?"수정실패":"브랜드 추가 실패"})},L=o=>{console.log("삭제하기",o.id)};G(()=>{g()});const q=o=>{t.logoUrl=o.data,m.value.clearValidate("logoUrl")};return(o,e)=>{const i=r("el-button"),f=r("el-table-column"),P=r("el-table"),S=r("el-pagination"),j=r("el-card"),F=r("el-input"),T=r("el-form-item"),R=r("Plus"),A=r("el-icon"),D=r("el-upload"),M=r("el-form"),O=r("el-dialog");return y(),N("div",null,[l(j,{class:"box-card"},{default:n(()=>[l(i,{type:"primary",size:"default",icon:"Plus",onClick:e[0]||(e[0]=a=>$())},{default:n(()=>[b("브랜드 추가")]),_:1}),l(P,{style:{margin:"10px 0"},border:"",data:s(U)},{default:n(()=>[l(f,{label:"NO",align:"center",width:"80px",type:"index"}),l(f,{label:"브랜드 네임",align:"center",prop:"tmName"}),l(f,{label:"브랜드 로고",align:"center"},{default:n(({row:a,$index:H})=>[V("img",{src:a.logoUrl,style:{width:"100px",height:"100px"}},null,8,Y)]),_:1}),l(f,{label:"비고",align:"center"},{default:n(({row:a,$index:H})=>[l(i,{type:"primary",plain:"",size:"small",icon:"Edit",onClick:I=>B(a)},null,8,["onClick"]),l(i,{type:"danger",plain:"",icon:"Delete",size:"small",onClick:I=>L(a)},null,8,["onClick"])]),_:1})]),_:1},8,["data"]),l(S,{"current-page":s(d),"onUpdate:currentPage":e[1]||(e[1]=a=>v(d)?d.value=a:d=a),"page-size":s(c),"onUpdate:pageSize":e[2]||(e[2]=a=>v(c)?c.value=a:c=a),layout:" prev, pager, next,jumper,->,sizes, total",total:s(x),onSizeChange:e[3]||(e[3]=a=>g()),onCurrentChange:e[4]||(e[4]=a=>g(s(d)))},null,8,["current-page","page-size","total"])]),_:1}),l(O,{modelValue:s(u),"onUpdate:modelValue":e[7]||(e[7]=a=>v(u)?u.value=a:u=a),title:s(t).id?"modify Trademark":"add Trademark"},{footer:n(()=>[V("span",ee,[l(i,{onClick:e[6]||(e[6]=a=>v(u)?u.value=!1:u=!1)},{default:n(()=>[b("Cancel")]),_:1}),l(i,{type:"primary",onClick:E},{default:n(()=>[b(" Confirm ")]),_:1})])]),default:n(()=>[l(M,{model:s(t),ref_key:"ruleFormRef",ref:m,rules:z},{default:n(()=>[l(T,{label:"Brand Name","label-width":"80px",prop:"tmName"},{default:n(()=>[l(F,{modelValue:s(t).tmName,"onUpdate:modelValue":e[5]||(e[5]=a=>s(t).tmName=a),placeholder:"브랜드명을 적으세요"},null,8,["modelValue"])]),_:1}),l(T,{label:"Brand Logo","label-width":"80px",prop:"logoUrl"},{default:n(()=>[l(D,{class:"avatar-uploader",action:"http://sph-api.atguigu.cn/admin/product/fileUpload","show-file-list":!1,"on-success":q,"before-upload":o.beforeAvatarUpload},{default:n(()=>[s(t).logoUrl?(y(),N("img",{key:0,src:s(t).logoUrl,class:"avatar"},null,8,Z)):(y(),K(A,{key:1,class:"avatar-uploader-icon"},{default:n(()=>[l(R)]),_:1}))]),_:1},8,["before-upload"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});const ne=Q(ae,[["__scopeId","data-v-4ced82e6"]]);export{ne as default};

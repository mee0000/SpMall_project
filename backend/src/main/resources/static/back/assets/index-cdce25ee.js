import{d as w,r as b,a as G,S as H,y as J,U as K,V as Q,e as o,o as g,f as C,g as e,h as c,w as a,A as I,m as h,j as f,F as L,q as R,v as B,t as $,B as z,z as U,L as m,W as Y,X as Z}from"./index-7801d67b.js";const ee=["onClick"],le=w({__name:"index",setup(te){let p=b(0),y=b([]),n=G({attrName:"",id:"",categoryId:"",categoryLevel:2,attrValueList:[]}),_=H(),N=b([]);J(()=>_.category2Id,()=>{_.category2Id!=""&&(N.value=[],V())});const V=async()=>{const{category1Id:t,category2Id:i}=_,{data:v}=await K(t,i);N.value=v},k=t=>{p.value=1,console.log(t,"----------------"),t?Object.assign(n,t):Object.assign(n,{attrName:"",id:"",categoryId:"",categoryLevel:2,attrValueList:[]}),n.categoryId=_.category2Id},S=()=>{p.value=0},q=()=>{n.attrValueList.push({valueName:"",flag:!0,attrId:n.id,id:""}),U(()=>{y.value[y.value.length-1].focus()})},D=(t,i)=>{console.log(t),t.flag=!0,U(()=>{y.value[i].focus()})},j=(t,i)=>{if(t.valueName.trim()==""){n.attrValueList.splice(i,1),m({message:"속성값이 비었습니다.",type:"error"});return}if(n.attrValueList.find(s=>{if(s!=t)return s.valueName==t.valueName}))return m({message:"속성값이 중복되었습니다",type:"error"}),t.flag=!1,!1;m({message:"속성값이 등록되었습니다",type:"success"}),t.flag=!1},E=t=>{n.attrValueList.splice(t,1)},O=async()=>{(await Y(n)).code==200?(m({message:"성공적으로 저장되었습니다.",type:"success"}),p.value=0,V()):m({message:"실패",type:"error"})},F=async t=>{console.log(t),(await Z(t.id)).code==200?(m({message:"성공적으로 삭제되었습니다.",type:"success"}),V()):m({message:"실패",type:"error"})};return Q(()=>{_.$reset()}),(t,i)=>{const v=o("Category"),s=o("el-button"),u=o("el-table-column"),P=o("el-tag"),T=o("el-popconfirm"),x=o("el-table"),A=o("el-input"),M=o("el-form-item"),W=o("el-form"),X=o("el-card");return g(),C(L,null,[e(v,{scene:c(p)},null,8,["scene"]),e(X,{style:{"margin-top":"10px"}},{default:a(()=>[I(h("div",null,[e(s,{type:"primary",size:"default",icon:"Plus",disabled:!c(_).category2Id,onClick:k},{default:a(()=>[f(" 속성 추가 ")]),_:1},8,["disabled"]),e(x,{style:{margin:"10px 0"},data:c(N),border:""},{default:a(()=>[e(u,{label:"NO",type:"index",align:"center",width:"80px"}),e(u,{label:"AttrName",align:"center",width:"150px",prop:"attrName"}),e(u,{label:"AttrValueName",align:"center"},{default:a(({row:l,$index:d})=>[(g(!0),C(L,null,R(l.attrValueList,r=>(g(),B(P,{key:r.id,style:{margin:"0px 5px"}},{default:a(()=>[f($(r.valueName),1)]),_:2},1024))),128))]),_:1}),e(u,{label:"비고",align:"center",width:"150px"},{default:a(({row:l,$index:d})=>[e(s,{type:"primary",plain:"",size:"small",onClick:r=>k(l),icon:"Edit"},null,8,["onClick"]),e(T,{title:`${l.attrName} 을/를 삭제하겠습니까?`,onConfirm:r=>F(l)},{reference:a(()=>[e(s,{type:"danger",plain:"",size:"small",icon:"Delete"})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"])],512),[[z,c(p)==0]]),I(h("div",null,[e(W,{inline:"true"},{default:a(()=>[e(M,{label:"속성 네임"},{default:a(()=>[e(A,{placeholder:"Please Input",size:"large",modelValue:c(n).attrName,"onUpdate:modelValue":i[0]||(i[0]=l=>c(n).attrName=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{type:"primary",disabled:!c(n).attrName,onClick:q},{default:a(()=>[f(" 속성값 추가 ")]),_:1},8,["disabled"]),e(s,null,{default:a(()=>[f("취소")]),_:1}),e(x,{border:"",data:c(n).attrValueList,style:{margin:"10px 0"}},{default:a(()=>[e(u,{type:"index",label:"No번호",width:"80",align:"center"}),e(u,{label:"AttrName"},{default:a(({row:l,$index:d})=>[l.flag?(g(),B(A,{key:0,modelValue:l.valueName,"onUpdate:modelValue":r=>l.valueName=r,onBlur:r=>j(l,d),ref:r=>c(y)[d]=r},null,8,["modelValue","onUpdate:modelValue","onBlur"])):(g(),C("div",{key:1,onClick:r=>D(l,d)},$(l.valueName),9,ee))]),_:1}),e(u,{label:"Address",align:"center",width:"120"},{default:a(({row:l,$index:d})=>[e(s,{type:"danger",plain:"",size:"small",icon:"Delete",onClick:r=>E(d)},null,8,["onClick"])]),_:1})]),_:1},8,["data"]),e(s,{type:"primary",onClick:O},{default:a(()=>[f("저장")]),_:1}),e(s,{onClick:S},{default:a(()=>[f("취소")]),_:1})],512),[[z,c(p)==1]])]),_:1})],64)}}});export{le as default};
